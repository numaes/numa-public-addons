<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <data>
        <record id="background_job_tree" model="ir.ui.view">
            <field name="name">background.job.tree</field>
            <field name="model">res.background.job</field>
            <field name="arch" type="xml">
                <tree string="Background Jobs">
                    <field name="name"/>
                    <field name="model"/>
                    <field name="res_id"/>
                    <field name="method"/>
                    <field name="reference_id"/>
                    <field name="completion_rate"/>
                    <field name="current_status"/>
                    <field name="initialized_on"/>
                    <field name="started_on"/>
                    <field name="ended_on"/>
                    <field name="aborted_on"/>
                    <field name="state" widget="badge"/>
                </tree>
            </field>
        </record>

        <record id="background_job_form" model="ir.ui.view">
            <field name="name">background.job.form</field>
            <field name="model">res.background.job</field>
            <field name="arch" type="xml">
                <form string="Background Job" version="7.0">
                    <header>
                        <button name="abort" invisible="state != 'started'" type="object" string="Abort" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <label for="name"/>
                            <h1>
                                <field name="name" class="oe_inline" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group name="main_info" string="Information">
                                <field name="model"/>
                                <field name="res_id"/>
                                <field name="method"/>
                                <field name="reference_id"/>
                            </group>
                            <group name="current_state" string="States">
                                <field name="completion_rate"/>
                                <field name="current_status"/>
                                <field name="error"/>
                            </group>
                            <group name="dates" string="Dates">
                                <field name="initialized_on"/>
                                <field name="started_on"/>
                                <field name="ended_on"/>
                                <field name="aborted_on"/>
                            </group>
                        </group>
                   </sheet>
                </form>
            </field>
        </record>

        <record id="background_job_search" model="ir.ui.view">
            <field name="name">background.job.search</field>
            <field name="model">res.background.job</field>
            <field name="arch" type="xml">
                <search string="Background Jobs">
                    <filter string="Initialized" name="initialized" domain="[('state','=','init')]" />
                    <filter string="Started" name="started" domain="[('state','=','started')]" />
                    <filter string="Ended" name="ended" domain="[('state','=','ended')]" />
                    <filter string="Aborted" name="aborted" domain="[('state','=','aborted')]" />
                    <field name="name"/>
                    <field name="model"/>
                    <group expand="0" string="Grouped by..." colspan="4" col="10">
                        <filter string="State" name="group_by_state" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Model" name="group_by_model" domain="[]" context="{'group_by':'model'}"/>
                    </group>
                </search>
            </field>
        </record>
    </data>
</odoo>
