<?xml version="1.0"?>
<openerp>
    <data>

        <record id="numa_account_fiscalyears_search_view" model="ir.ui.view">
            <field name="name">Fiscal Years Search</field>
            <field name="model">account.fiscalyears</field>
            <field name="arch" type="xml">
                <search string="Fiscal Years" >
                    <field name="name"/>
                    <field name="code" />
                    <field name="company_id"/>
                    <field name="date_start" filter_domain="[('date_start','&gt;=',self)]"/>
                    <field name="date_end" filter_domain="[('date_end','&lt;=',self)]"/>
                    <field name="state"/>
                    <filter string="Draft" name="state" domain="[('state','=','draft')]"/>
                    <filter string="Open" name="state" domain="[('state','=','open')]"/>
                    <filter string="Process" name="state" domain="[('state','=','process')]"/>
                    <filter string="Close" name="state" domain="[('state','=','close')]"/>
                    <group expand="1" name="group_by" string="Group By">
                        <filter string="Company" context="{'group_by': 'company_id'}"/>
                        <filter string="State" context="{'group_by': 'state'}"/>
                    </group>
                 </search>
            </field>
        </record>
        <record id="numa_accouny_fiscalyears_kanban_view" model="ir.ui.view">
            <field name="name">Fiscal years Kanban</field>
            <field name="model">account.fiscalyears</field>
            <field name="arch" type="xml">
                <kanban>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_vignette oe_semantic_html_override">
								<div style="float:left;">
									<a type="open"><img style="width:90px; height:90px;" t-att-src="kanban_image('account.fiscalyears', 'company_image', record.id.value)" class="oe_kanban_image"/></a>
								</div>
                                <div style="float:left;margin-left:20px;">
                                    <h4>
                                        <a type="open">
                                             <field name="name"/> 
                                        </a>
									</h4>
									<ul>
										<li><field name="company_id"/> [<field name="code"/>]</li>
										<li><field name="date_start"/> - <field name="date_end"/></li>
										<li><field name="state"/></li>
									</ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="numa_account_fiscalyears_tree_view" model="ir.ui.view">
            <field name="name">Fiscal Years Tree</field>
            <field name="model">account.fiscalyears</field>
            <field name="arch" type="xml">
				<tree string="Fiscal Years" colors="blue:state=='process';green:state=='open';red:state=='close'" class="numa_fiscal_periods">
                    <field name="name"/>
                    <field name="code" />
                    <field name="company_id"/>
                    <field name="date_start"/>
                    <field name="date_end" />
                    <field name="state"/>
                    <button icon='fa-check' readonly="1" attrs="{'invisible':[('state', '!=', 'open')]}"/>
				</tree>
            </field>
        </record>
        <record id="numa_account_fiscalyears_form_view" model="ir.ui.view">
            <field name="name">Fiscal Years Form</field>
            <field name="model">account.fiscalyears</field>
            <field name="arch" type="xml">
                <form string="Fiscal Years">
                    <header>
                        <button name="action_open" string="Open" states="draft,process" class="btn-primary" type="object" />
                        <button name="action_process" string="Process" states="open,close" class="btn-primary" type="object" />
                        <button name="action_close" string="Close" states="process" class="btn-primary" type="object" />
                        <button name="action_to_draft" string="To Draft" states="open" type="object" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_right oe_button_box" name="buttons">
                            <div>
                             
                            </div>
                        </div>
						<field name="company_image" widget="image" class="oe_avatar"/>
                        <div class="oe_title" style="margin-left:20px;">
                            <label for="name"/>
                            <h1>
                                <field name="name" />
                            </h1>
                        </div>
						<group col="8" colspan="4">
                            <group colspan="4">
							    <field name="code" style="width:200px !important"/>
							    <field name="company_id" style="width:200px !important"/>
                            </group>
                            <group colspan="4">
							    <field name="date_start" style="width:150px !important"/>
							    <field name="date_end" style="width:150px !important"/>
							    <field name="note"/>
                            </group>
						</group>
                        <notebook> 
							<page String="Periods">
								<div class="oe_button_box" style="margin:10px 0 10px 0 !important;" name="period_button_box">
									<button class="oe_inline oe_stat_button" string="Mounths Periods" name="action_create_period_mounth" type="object" icon="fa-plus-circle" attrs="{'invisible':[('period_ids','!=',[])]}"/>
									<button class="oe_inline oe_stat_button" string="Trimester Periods" name="action_create_period_trimester" type="object" icon="fa-plus-square" attrs="{'invisible':[('period_ids','!=',[])]}"/>
								</div>
								<field name="period_ids" nolabel="1">
									<tree colors="blue:state=='process';green:state=='open'" decoration-muted="state=='close'" class="numa_fiscal_periods" create="0">
										<field name="name"/>
										<field name="code" />
										<field name="special"/>
										<field name="date_start"/>
										<field name="date_end" />
										<field name="state"/>
                                        <button name="action_open" icon='fa-unlock' attrs="{'invisible':[('state', '!=', 'draft')]}" help="Open Period"/>
                                        <button name="action_process" icon='fa-lock' attrs="{'invisible':[('state', '!=', 'open')]}" help="Process Period"/>
									</tree>
									<form string="Fiscal Periods">
										<header>
											<field name="state" widget="statusbar" clickable="True"/>
										</header>
										<sheet>
											<div class="oe_right oe_button_box" name="buttons">
												<div>
												 
												</div>
											</div>
											<field name="company_image" widget="image" class="oe_avatar"/>
											<div class="oe_title" style="margin-left:20px;">
												<label for="name"/>
												<h1>
													<field name="name" />
												</h1>
											</div>
											<group>
												<field name="fiscalyear_id" readonly="1" style="width:200px !important"/>
												<field name="company_id" readonly="1" style="width:200px !important"/>
												<field name="code" style="width:200px !important"/>
												<field name="special"/>
												<field name="date_start" style="width:150px !important"/>
												<field name="date_end" style="width:150px !important"/>
												<field name="note"/>
											</group>
										</sheet>
									</form>
								</field>
							</page>
						</notebook>
					</sheet>
                </form>
            </field>
        </record>

        <record id="numa_account_periods_search_view" model="ir.ui.view">
            <field name="name">Fiscal Periods Search</field>
            <field name="model">account.period</field>
            <field name="arch" type="xml">
                <search string="Fiscal Periods" >
					<field name="fiscalyear_id"/>
                    <field name="name"/>
                    <field name="code" />
                    <field name="special"/>
                    <field name="company_id"/>
                    <field name="date_start" filter_domain="[('date_start','&gt;=',self)]"/>
                    <field name="date_end" filter_domain="[('date_end','&lt;=',self)]"/>
                    <field name="state"/>
                    <filter string="Opening" name="special" domain="[('special','=',True)]"/>
                    <separator/>
                    <filter string="Draft" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Open" name="open" domain="[('state','=','open')]"/>
                    <filter string="Process" name="process" domain="[('state','=','process')]"/>
                    <filter string="Close" name="close" domain="[('state','=','close')]"/>
                    <group expand="1" name="group_by" string="Group By">
                        <filter string="Company" context="{'group_by': 'company_id'}"/>
                        <filter string="Fiscal Years" context="{'group_by': 'fiscalyear_id'}"/>
                        <filter string="State" context="{'group_by': 'state'}"/>
                    </group>
                 </search>
            </field>
        </record>
        <record id="numa_account_periods_tree_view" model="ir.ui.view">
            <field name="name">Fiscal Periods Tree</field>
            <field name="model">account.period</field>
            <field name="arch" type="xml">
				<tree string="Fiscal Periods" colors="blue:state=='process';green:state=='open'" decoration-muted="state=='close'" class="numa_fiscal_periods" create="0" edit="0">
					<field name="fiscalyear_id"/>
                    <field name="name"/>
                    <field name="code" />
                    <field name="special"/>
                    <field name="company_id"/>
                    <field name="date_start"/>
                    <field name="date_end" />
                    <field name="state"/>
                    <button name="action_open" icon='fa-unlock' attrs="{'invisible':[('state', '!=', 'draft')]}" help="Open Period"/>
                    <button name="action_process" icon='fa-lock' attrs="{'invisible':[('state', '!=', 'open')]}" help="Process Period"/>
				</tree>
            </field>
        </record>
        <record id="numa_account_periods_form_view" model="ir.ui.view">
            <field name="name">Fiscal Periods Form</field>
            <field name="model">account.period</field>
            <field name="arch" type="xml">
                <form string="Fiscal Periods">
                    <header>
                        <button name="action_open" string="Open" states="draft,process" class="btn-primary" type="object" />
                        <button name="action_process" string="Process" states="open,close" class="btn-primary" type="object" />
                        <button name="action_close" string="Close" states="process" class="btn-primary" type="object" />
                        <button name="action_to_draft" string="To Draft" states="open" type="object" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_right oe_button_box" name="buttons">
                            <div>
                             
                            </div>
                        </div>
						<field name="company_image" widget="image" class="oe_avatar"/>
                        <div class="oe_title" style="margin-left:20px;">
                            <label for="name"/>
                            <h1>
                                <field name="name" />
                            </h1>
                        </div>
						<group>
							<field name="fiscalyear_id" style="width:200px !important"/>
							<field name="company_id" style="width:200px !important"/>
							<field name="code" style="width:200px !important"/>
							<field name="special"/>
							<field name="date_start" style="width:150px !important"/>
							<field name="date_end" style="width:150px !important"/>
							<field name="note"/>
						</group>
					</sheet>
                </form>
            </field>
        </record>
        
        <record id="numa_account_fiscalyear_action" model="ir.actions.act_window">
            <field name="name">Fiscal Years</field>
            <field name="res_model">account.fiscalyears</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new Fiscal Year.
              </p><p>
                You will be able to manage Fiscal Year, e.g: 2017
			  </p>
            </field>
        </record>

        <record id="numa_account_period_action" model="ir.actions.act_window">
            <field name="name">Fiscal Periods</field>
            <field name="res_model">account.period</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        
        <menuitem name="Fiscal Year" id="numa_account_fiscalyear_menu" parent="account.account_account_menu" sequence="10" />        
        <menuitem action="numa_account_fiscalyear_action" id="numa_account_fiscalyears_menu" parent="numa_account_fiscalyear_menu" sequence="10" />
        <menuitem action="numa_account_period_action" id="numa_account_periods_menu" parent="numa_account_fiscalyear_menu" sequence="20" />
        
    </data>
</openerp>
